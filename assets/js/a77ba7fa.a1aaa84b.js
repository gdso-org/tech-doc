"use strict";(self.webpackChunktech_doc=self.webpackChunktech_doc||[]).push([[943],{3905:(e,t,n)=>{n.d(t,{Zo:()=>d,kt:()=>m});var i=n(7294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,i,o=function(e,t){if(null==e)return{};var n,i,o={},a=Object.keys(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var l=i.createContext({}),c=function(e){var t=i.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):r(r({},t),e)),n},d=function(e){var t=c(e.components);return i.createElement(l.Provider,{value:t},e.children)},u="mdxType",p={inlineCode:"code",wrapper:function(e){var t=e.children;return i.createElement(i.Fragment,{},t)}},h=i.forwardRef((function(e,t){var n=e.components,o=e.mdxType,a=e.originalType,l=e.parentName,d=s(e,["components","mdxType","originalType","parentName"]),u=c(n),h=o,m=u["".concat(l,".").concat(h)]||u[h]||p[h]||a;return n?i.createElement(m,r(r({ref:t},d),{},{components:n})):i.createElement(m,r({ref:t},d))}));function m(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var a=n.length,r=new Array(a);r[0]=h;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s[u]="string"==typeof e?e:o,r[1]=s;for(var c=2;c<a;c++)r[c]=n[c];return i.createElement.apply(null,r)}return i.createElement.apply(null,n)}h.displayName="MDXCreateElement"},1259:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>r,default:()=>p,frontMatter:()=>a,metadata:()=>s,toc:()=>c});var i=n(7462),o=(n(7294),n(3905));const a={sidebar_position:3},r="2. Authentication",s={unversionedId:"getting-started/authentication",id:"getting-started/authentication",title:"2. Authentication",description:"Along with its goal to provide the right endpoint that will give customers information about their tires, the",source:"@site/docs/getting-started/authentication.md",sourceDirName:"getting-started",slug:"/getting-started/authentication",permalink:"/tech-doc/docs/getting-started/authentication",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/getting-started/authentication.md",tags:[],version:"current",sidebarPosition:3,frontMatter:{sidebar_position:3},sidebar:"tutorialSidebar",previous:{title:"1. ONS resolution",permalink:"/tech-doc/docs/getting-started/ons-resolution"},next:{title:"3. API Call to Tire Manufacturer",permalink:"/tech-doc/docs/getting-started/api-call"}},l={},c=[{value:"2.1. Prerequisite",id:"21-prerequisite",level:2},{value:"2.2. Get an identification token",id:"22-get-an-identification-token",level:2},{value:"2.2.1. Solution 1: Use Open Id connect",id:"221-solution-1-use-open-id-connect",level:3},{value:"2.2.1.1 Open Id \u2013 Implicit flow",id:"2211-open-id--implicit-flow",level:4},{value:"2.2.1.2 Open Id \u2013 Authorization Code Flow",id:"2212-open-id--authorization-code-flow",level:4},{value:"2.2.2. Solution 2: Use API Endpoint for System connection (restricted access)",id:"222-solution-2-use-api-endpoint-for-system-connection-restricted-access",level:3}],d={toc:c},u="wrapper";function p(e){let{components:t,...a}=e;return(0,o.kt)(u,(0,i.Z)({},d,a,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"2-authentication"},"2. Authentication"),(0,o.kt)("p",null,"Along with its goal to provide the right endpoint that will give customers information about their tires, the\nTire Information Service aims at offering a single identification solution shared by every tire manufacturer.\nKeep in mind that this Authentication is optional when a user only requires free and public data about a tire.\nAll GDSO members involved in the TIS agreed on a list of information that can be publicly shared on any\ntire. ",(0,o.kt)("strong",{parentName:"p"}," As long as a customer does not need information outside of this public core set of data, there is\nno need for authentication before going to Step 3. ")),(0,o.kt)("p",null,"However, the Tire Information Service is also built to give more than the agreed public information.\nWhenever customers require additional data, they may ask manufacturers to share private data through\nthe TIS. Agreements related to private data, have to be made between a customer and each tire maker\nhe/she would like to work with. GDSO is not involved in those commercial offers or contracts. However, the\nTIS provides a single point of identification that will avoid a customer the creation of several accounts in\neach tire manufacturer\u2019s system.\nGDSO authentication system will provide to its authorized users an identification token that can be passed\nto any manufacturer\u2019s API. Having such a token will become mandatory for any customer who would like to\nget additional private data through the TIS.\nThe process to authenticate and obtain an Id token is described in the steps below."),(0,o.kt)("h2",{id:"21-prerequisite"},"2.1. Prerequisite"),(0,o.kt)("p",null,"In order to execute this step, you will need a user declared by GDSO at the TIS level. It means you have to\nrequest an access to GDSO organization which will provide you a username and password, once your\ndemand is processed.\nSuch a request can be made by sending an email to ",(0,o.kt)("a",{parentName:"p",href:"mailto:info@gdso.org"},"info@gdso.org")," providing a username and their\nassociated email address."),(0,o.kt)("h2",{id:"22-get-an-identification-token"},"2.2. Get an identification token"),(0,o.kt)("h3",{id:"221-solution-1-use-open-id-connect"},"2.2.1. Solution 1: Use Open Id connect"),(0,o.kt)("p",null,"Open Id Connect (OIDC) is a standard based on Oauth2. You may find official documentation on:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"https://oauth.net/articles/authentication/"},"https://oauth.net/articles/authentication/")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"https://openid.net/connect/"},"https://openid.net/connect/"))),(0,o.kt)("p",null,"OpenId standard provides different solutions for users to identify themselves toward another system. The\ntwo following flows are recommended for browser-based identification. They also require to have a client Id\nand client Secret declared on the authentication server\u2019s side. ",(0,o.kt)("strong",{parentName:"p"}," If you need to obtain them, you may\naddress a request by mail to ",(0,o.kt)("a",{parentName:"strong",href:"mailto:info@gdso.org"},"info@gdso.org"),".")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-jsx"},"POST https://authentication-api.testing.gdso.org/getIdToken\n")),(0,o.kt)("h4",{id:"2211-open-id--implicit-flow"},"2.2.1.1 Open Id \u2013 Implicit flow"),(0,o.kt)("p",null,"Note: The implicit flow method is possible in a browser environment. Although it is easier to implement\nthan the \u2018Authorization code flow\u2019 (presented in the next part), it also carries more security risks. That is why\nit only delivers a temporary access token and no refresh token.\nProcess: To receive an identification token, the application (client) or user will have to make an\nauthentication request to the Amazon Cognito server used by the TIS. This request requires:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Username and password (obtained in step 2.1)"),(0,o.kt)("li",{parentName:"ul"},"Client Id (see Annex 1 for example and Introduction if you need to request a client)"),(0,o.kt)("li",{parentName:"ul"},"A callback URL for your application")),(0,o.kt)("p",null,"Example:"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"First you can make an authentication request to the following URL (see Annex 1 for Cognito URL on all\nenvironments). It will redirect to the Tire Information Service login page.")),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Auth request",src:n(6207).Z,width:"1530",height:"146"})),(0,o.kt)("p",null,"Parameters:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"In green --\x3e Cognito authorization URL"),(0,o.kt)("li",{parentName:"ul"},"In purple --\x3e Response_type=token"),(0,o.kt)("li",{parentName:"ul"},"In yellow --\x3e Client Id (see Annex 1)"),(0,o.kt)("li",{parentName:"ul"},"In Blue --\x3e Your callback URL")),(0,o.kt)("p",null,"You will receive a redirection toward the login service in the response\u2019s header (in red below):"),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Redirection login service",src:n(5382).Z,width:"1522",height:"598"})),(0,o.kt)("ol",{start:2},(0,o.kt)("li",{parentName:"ol"},"Then you can request the redirection URL in a browser, that will lead you to Sign in page:")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-jsx"},"GET https://fuqzxw2k75c49t2fdn.auth.eu-central-1.amazoncognito.com/login?\nresponse_type=token&state=anything&client_id=3661gkmsqil29qtb24rvq3o4tb&scope=openi\nd&redirect_uri=https%3A%2F%2Fwww.myapplication.com%2Foauth2%2Fcallback\n")),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Redirection login service",src:n(3568).Z,width:"1110",height:"1252"})),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"Validating the credentials will trigger a login request and send back an Id Token and an Access Token to\nyour callback URL.\nClientId is in the request\u2019s header, credentials are in the request\u2019s body. (Note that in theory, the two\nprevious steps aim at leading you to this request).")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-jsx"},'POST https://fuqzxw2k75c49t2fdn.auth.eu-central-1.amazoncognito.com/login?\nresponse_type=token&state=anything&client_id=3661gkmsqil29qtb24rvq3o4tb&scope=openid&re\ndirect_uri=https%3A%2F%2Fwww.myapplication.com%2Foauth2%2Fcallback\n\nBody:\n- username: "myLogin"\n- password: "********"\n')),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Redirection login service",src:n(7196).Z,width:"1600",height:"732"})),(0,o.kt)("h4",{id:"2212-open-id--authorization-code-flow"},"2.2.1.2 Open Id \u2013 Authorization Code Flow"),(0,o.kt)("p",null,"Note: Here is another standard process that leads to receiving an Id Token. Like the Implicit Flow presented\nabove, it is also available in a browser environment. When possible, it is the recommended process to\nimplement. It is more secure than the \u2018Implicit flow\u2019 and provides a refresh token to be used when the given\ntoken expires. However, unlike the previous method, it will require the use of a client secret.\nProcess: To receive an identification token, the application (client) or user will have to make an\nauthentication request to the Amazon Cognito server used by the TIS. This request requires:\nUsername and password (obtained in step 2.1)\nClient Id (see Annex 1 for example and Introduction if you need to request a client)\nClient Secret (see Introduction if you need to request a client)\nA callback URL for your application\nExample:"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"First you will have to submit an authentication request with a \u2018code\u2019 response type\nParameters:\nCognito authorization URL: ",(0,o.kt)("a",{parentName:"p",href:"https://fuqzxw2k75c49t2fdn.auth.eu-central-"},"https://fuqzxw2k75c49t2fdn.auth.eu-central-"),"\n1.amazoncognito.com/oauth2/authorize\nResponse Type: response_type=code\nApplication Client Id (see Annex 1): 3661gkmsqil29qtb24rvq3o4tb\nYour callback URL: ",(0,o.kt)("a",{parentName:"p",href:"https://www.myapplication.com/oauth2/callback"},"https://www.myapplication.com/oauth2/callback"))),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"You will receive a redirection to the login page where you may enter your user\u2019s credentials:"))),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-jsx"},"GET https://fuqzxw2k75c49t2fdn.auth.eu-central-\n1.amazoncognito.com/oauth2/authorize?\nresponse_type=code&state=anything&client_id=3661gkmsqil29qtb24rvq3o4tb&scope=openid\n&redirect_uri=https%3A%2F%2Fwww.myapplication.com%2Foauth2%2Fcallback\n")),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Redirection login service",src:n(3568).Z,width:"1110",height:"1252"})),(0,o.kt)("ol",{start:3},(0,o.kt)("li",{parentName:"ol"},"Validating the credentials will trigger a login request and send back an authorization code to your\ncallback URL.\nThe request will return the authorization code in the response \u2018location\u2019 header")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-jsx"},'GET https://fuqzxw2k75c49t2fdn.auth.eu-central-1.amazoncognito.com/login?\nresponse_type=code&state=anything&client_id=3661gkmsqil29qtb24rvq3o4tb&scope=openid\n&redirect_uri=https%3A%2F%2Fwww.myapplication.com%2Foauth2%2Fcallback\n\nPOST https://fuqzxw2k75c49t2fdn.auth.eu-central-1.amazoncognito.com/login?\nresponse_type=code&state=anything&client_id=3661gkmsqil29qtb24rvq3o4tb&scope=openid\n&redirect_uri=https%3A%2F%2Fwww.myapplication.com%2Foauth2%2Fcallback\n\nBody:\n- username: "myLogin"\n- password: "********"\n')),(0,o.kt)("p",null,"Location: http://myApplication/oidc/endpoint?code=849830ee-8418-444d-ac26-8734f3135a95"),(0,o.kt)("ol",{start:4},(0,o.kt)("li",{parentName:"ol"},"Then you may send a token request to the Cognito server, using the authorization code that was\nprovided in the previous step, in combination with your Client Id and Client Secret:\nThe request will return a json with IdToken, AccessToken and RefreshToken")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-jsx"},'POST https://fuqzxw2k75c49t2fdn.auth.eu-central-1.amazoncognito.com/oauth2/token\nBody:\n- grant_type: "authorization_code"\n- code: "849830ee-8418-444d-ac26-8734f3135a95" --\x3e Given in step 2\n- redirect_uri: http://myApplication/oidc/endpoint --\x3e Your callback URL\n- client_id: "64v14gunpd9hicf4ufk67tav8j" --\x3e See Annex 1 for Client Ids\n- client_secret: "4a8ajiv33tbkvqzt9wa8gs2qe16hb1w863z1yx6g604l0bnqtd0w"\n')),(0,o.kt)("p",null,"The request will return a json with IdToken, AccessToken and RefreshToken"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-jsx"},'{"id_token":"eyJraWQiOiJWR0QrQlhsY0Z1ZFwvSDhRc3NHNCtnNnlxT1pKXC81T1RlWm9CeEt3RDhScm\nc9IiwiYWxnIjoiUlMyNTYifQ.eyJhdF9oYXNoIjoiY1hjbkxDYjc2alVHd2VOMnlNQ3E1USIsImNvZ25pdG\n86cm9sZXMiOlsiYXJuOmF3czppYW06OjQ2Nzc0NjQ2MDE2Nzpyb2xlXC9tYWludGFpbmVyLXVpLWdyb3VwL\nXJvbGUiXSwic3ViIjoiN2Y4ZDczZmYtMDBhNi00MjRkLWE3NDctMDY3NGI2MGYzMDlhIiwiYXVkIjoiNjR2\nMTRndW5wZDloaWNmNHVmazY3dGF2OGoiLCJjb2duaXRvOmdyb3VwcyI6WyJtYWludGFpbmVyLXVpIl0sInR\nva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNjE0MDg4NjIyLCJpc3MiOiJodHRwczpcL1wvY29nbml0by\n1pZHAuZXUtY2VudHJhbC0xLmFtYXpvbmF3cy5jb21cL2V1LWNlbnRyYWwtMV9sTkZGaFdlRFkiLCJjb2dua\nXRvOnVzZXJuYW1lIjoiai5kdXJpZiIsImV4cCI6MTYxNDA5MjIyMiwiaWF0IjoxNjE0MDg4NjIyLCJlbWFp\nbCI6Implcm9tZS5kdXJpZl9leHRAbWljaGVsaW4uY29tIn0.pUNTrgjkB19gpCxFnKQAPTeTprZVzBCIQ6H\nbkY8xz0tPzyIg1BgsgoJFyB7xC9vw9t7b3oWheStB08eh9s9v-2Vgh17W0kNWGBM4u-\nZsfdCb7m4LXCjw4L0OIdfjxdXrPnZ2PC_w-D20nLpr01prD3aDIZmjHP2v65WVcziGdn6-ORuYjzLqUJn2-\nv3EbcIwZs9i_r4sg4JPFjqYAMrcAi1UIi1WA2wV0zbIvaj3i-XGyTt-\nLPthkine6vbCKLwrbEATajWOK9lhyKveSwpsdt34Fhxlw4dsP4hQ5pP5We-pCrW2wKs3-sD8srmhELAgmNYCrWIabipwyKe9g7Q","\naccess_token":"eyJraWQiOiJQcDh6am5aOXlsTGsyU0JKTkZtaHRKNENiR1I2bDYxZHhvOXBn\nXC9DdXVBUT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiI3ZjhkNzNmZi0wMGE2LTQyNGQtYTc0Ny0wNjc0Yj\nYwZjMwOWEiLCJjb2duaXRvOmdyb3VwcyI6WyJtYWludGFpbmVyLXVpIl0sInRva2VuX3VzZSI6ImFjY2Vzc\nyIsInNjb3BlIjoib3BlbmlkIHByb2ZpbGUgZW1haWwiLCJhdXRoX3RpbWUiOjE2MTQwODg2MjIsImlzcyI6\nImh0dHBzOlwvXC9jb2duaXRvLWlkcC5ldS1jZW50cmFsLTEuYW1hem9uYXdzLmNvbVwvZXUtY2VudHJhbC0\nxX2xORkZoV2VEWSIsImV4cCI6MTYxNDA5MjIyMiwiaWF0IjoxNjE0MDg4NjIyLCJ2ZXJzaW9uIjoyLCJqdG\nkiOiI2Mzc1MzBhMC03NmQ2LTQ3OTItYjg5NS1jYjQ0MGFlNjY3YjkiLCJjbGllbnRfaWQiOiI2NHYxNGd1b\nnBkOWhpY2Y0dWZrNjd0YXY4aiIsInVzZXJuYW1lIjoiai5kdXJpZiJ9.NJupeYizKbdfnyII3aUx50c9mQ5\npcnZC6swBISz8hbm66Hy5d6gZdefuLUWYWc2cmcMXSr3iCbup2ZYwfNDNfjaPJ3ydXKx8PM4pNlHZOpESmMIGX26CXqToQVUiM28nocvP0VRGYvlr51ouj7AVufTBN\nP17hXZOvG6X2\nm2bIzP2nHOPpHjNGMGWvXDhCgdHNrSlrR26_rBkYxDURhIn4AR1TfWv_EKSV6S9Wsmk2itWLi4Yl9G9EAx-\nEY5GhXGZ7_s598XZcgf8qpEUFjYRXO2k9sbmCGcyny12pNhAUB9LGtgyT9SbHLS_\nrRNFHVh7SRWRItEGnD26kkkcIFIw","refresh_token":"\nfyJjdHkiOiJKV1QiLCJlbmMiOiJBMjU2R0NNIiwiYWxnIjoiUlNBLU9BRVAifQ.WeFGaQlNoT2nwipnNm0w\nWA8DPiXgI1L6XWgJvKaeFQfTLkrTe8BcbWCcCTN7lcAQkj8uL1YzzIYJdzjp_\nyusK0nSU3PzrVDQ1a8N1dntrAtBxVbly4Uz0R_AaI8q4sXXMVIqf4sXfVWtLZaJj4YtFBzCM7rhI\nwMPGESMs1P4CHtszr0CT4AbUsL8nRRKMY7LEhaWwQ73-\n438wEnKAS_dp9XtLf4qg0jihMOtRso175xFa3muFZn7nhDKicIC0w4YL19O0rshTndEPiQ0ehLI3OiLbeED\npHIG_IZ5IUPivIDPzZ7OBgXISTXohRPcGWxwa8zaX3ya3Plk5L-FjjAtg.-\nYn6BMOR5KsxfH8K.OYR3vqzICuClov2_GYiKLH5ysL3POK713cVAtxnn3kSPg3:\n')),(0,o.kt)("h3",{id:"222-solution-2-use-api-endpoint-for-system-connection-restricted-access"},"2.2.2. Solution 2: Use API Endpoint for System connection (restricted access)"),(0,o.kt)("p",null,"An API endpoint is available to request an Identification token based on the username and password you\nwill receive as a result of the previous step 2.1. This method is recommended for system-to-system\ncommunication.\nExample:\nThe example is based on the TIS Testing environment URL (see Annex 1 for the different environments URL).\nAuthorization type = HTTP Basic Authentication\nPopulate with the Username and Password provided by GDSO\nToken duration < less 1 Day"),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"GetIDToken answer",src:n(3833).Z,width:"1604",height:"504"})))}p.isMDXComponent=!0},6207:(e,t,n)=>{n.d(t,{Z:()=>i});const i=n.p+"assets/images/example_authentication_request-cb3f18ba5a880d6fcfd1894d2a23b3be.png"},3833:(e,t,n)=>{n.d(t,{Z:()=>i});const i=n.p+"assets/images/example_getidtoken_request-157f06537bc25722703783102d73b4f1.png"},3568:(e,t,n)=>{n.d(t,{Z:()=>i});const i=n.p+"assets/images/example_login_form-3916d7a858a359b44fe9f1814aed1960.png"},7196:(e,t,n)=>{n.d(t,{Z:()=>i});const i=n.p+"assets/images/example_post_login-2a5125fb7b66554438f69120f5c68fed.png"},5382:(e,t,n)=>{n.d(t,{Z:()=>i});const i=n.p+"assets/images/example_redirection_login_service-192147454693152484faf2794416fbec.png"}}]);